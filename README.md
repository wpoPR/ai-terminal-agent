# AI Terminal Agent

A complete system for managing AI workspaces (Claude, Gemini, Codex) in iTerm2.

## Features

- **Unified CLI**: Single `ai` command with intuitive subcommands
- **Agent Management**: Dynamic agent system with pre-defined profiles
- **Shared Context**: AIs share information via `.ai-context/`
- **Daily Summaries**: Aggregated reports generated by Gemini
- **Auto Backup**: 3-day retention
- **Git Integration**: Global ignore for personal AI files
- **Multi-machine**: Use across machines via Git
- **Source Included**: Editable code in `bin/`

## Quick Start

### Installation

```bash
cd ~/workspace
git clone https://github.com/your-user/ai-terminal-agent.git
cd ai-terminal-agent
./install.sh
```

### Basic Usage

```bash
cd ~/your-project
ai start              # Launch workspace with iTerm2 splits
ai stop               # Close with daily summary
ai status             # Check active workspaces
ai help               # Full documentation
```

## Commands

### Unified CLI (v2.0)

```bash
ai <command> [options]

# Quick shortcuts
ai start [path]           # Start AI workspace
ai stop                   # Stop workspace
ai status                 # Show status

# Workspace management
ai workspace start        # Launch AI workspace with iTerm2 splits
ai workspace stop         # Close workspace and generate summary
ai workspace status       # Show active workspaces and tokens
ai workspace recent       # List recent workspaces
ai workspace recover      # Recover from crashes
ai workspace console      # Show control console

# Agent management
ai agents list            # List all available agents
ai agents active          # Show active agents in project
ai agents enable <name>   # Enable an agent
ai agents disable <name>  # Disable an agent
ai agents profile <name>  # Activate a profile
ai agents profile list    # List available profiles
ai agents stats           # Show token usage statistics
ai agents suggest         # Suggest profile for current project
ai agents doctor          # Run diagnostics

# Context management
ai context init           # Initialize .ai-context/ structure
ai context init --with-prompts  # Include initial prompts for AIs
ai context check          # Diagnose context state
ai context sync           # Sync context between AIs
ai context diff           # Compare context files

# Configuration
ai config doctor          # Run health check diagnostics
ai config git --setup     # Configure git to ignore AI files
ai config export [file]   # Export configuration
ai config import <file>   # Import configuration
ai config update          # Update from git repository

# Help
ai help                   # Show main help
ai help agents            # Help about agent management
ai help context           # Help about shared context
ai help workflow          # Recommended workflow
ai help division          # Work division between AIs
ai help tips              # Quick tips
```

### Legacy Commands (still work)

```bash
ai-start, ai-stop, ai-status, ai-agents, ai-context-init, etc.
```

## Agent Management

The agent system lets you activate only the specialized agents you need, reducing token usage from ~34k to ~8-12k.

### Available Profiles

| Profile | Agents | Tokens | Description |
|---------|--------|--------|-------------|
| `minimal` | 2 | ~5k | Code review only |
| `frontend` | 4 | ~10k | React/Next.js, UI/UX |
| `backend` | 4 | ~11k | APIs, backend architecture |
| `fullstack` | 4 | ~11k | Frontend + Backend + Database |
| `mobile` | 3 | ~10k | iOS/Android development |
| `devops` | 5 | ~14k | Kubernetes, Terraform, deployment |
| `data` | 4 | ~12k | Data engineering, analytics |
| `ai-ml` | 4 | ~12k | AI/ML, MLOps, prompts |
| `security` | 4 | ~13k | Security audit |
| `docs` | 4 | ~10k | Documentation and tutorials |
| `research` | 3 | ~10k | Research and performance |

### Quick Start

```bash
# During ai start, choose a profile interactively
cd ~/my-project
ai start

# Or activate manually
ai agents profile fullstack

# Add/remove individual agents
ai agents enable security-auditor
ai agents disable frontend-security-coder

# Check statistics
ai agents stats

# Get automatic suggestion based on project
ai agents suggest
```

## AI Context Structure

The `.ai-context/` structure allows sharing information between Claude, Gemini, and Codex.

### Initialize

```bash
ai context init --with-prompts
```

### Structure Created

```
.ai-context/
├── project-status.md     # Project overview and state
├── current-task.md       # Active task tracking
├── decisions.md          # Technical decisions (ADR)
├── known-issues.md       # Bugs and limitations
├── roadmap.md            # Future plans
├── agents-reference.md   # Available agents reference
└── README.md             # Usage guide
```

### How to Use

1. **Initialize**: `ai context init --with-prompts`
2. **In Claude**: "Analyze this project and fill .ai-context/project-status.md"
3. **In Gemini**: "Read .ai-context/ and suggest improvements"
4. **In Codex**: "Read .ai-context/current-task.md and implement"

## Workflow Example

```
1. cd ~/my-project && ai start
   ↓
   iTerm2 opens with 3 AIs in split

2. Claude (left pane):
   "Analyze this project and create .ai-context/project-status.md"
   ↓
   Claude creates summary with: objective, progress, next steps

3. Gemini (top right):
   "Read .ai-context/project-status.md"
   "Research best JWT libraries for Node.js"
   ↓
   Gemini researches and recommends

4. Codex (bottom right):
   "Read .ai-context/project-status.md"
   "Implement JWT middleware"
   ↓
   Codex writes the code

5. Claude (review):
   "Review the auth code created by Codex"
   ↓
   Claude validates and suggests improvements

6. Close:
   ai stop    # Generates daily summary
```

## Prerequisites

- **macOS** (tested on 14+)
- **iTerm2** - Terminal emulator
- **Claude CLI** - `npm install -g @anthropic-ai/claude-code`
- **Gemini CLI** - `npm install -g @google/generative-ai` (optional)
- **Codex CLI** - OpenAI CLI (optional)
- **jq** - JSON processor (`brew install jq`)

## Architecture

### Technical Overview

**AI Terminal Agent** is a CLI framework designed to orchestrate multiple AI assistants (Claude, Gemini, Codex) in iTerm2. The core philosophy is **Dynamic Context Injection**: load only the agents needed for the current task.

### Main Components

1. **Logic Layer (`bin/`)**: Shell Script engine managing session lifecycle and agent orchestration
2. **Intelligence Layer (`agents-list/`)**: Library of 47 specialist personas (Markdown)
3. **State Management (`.ai-context/`)**: File system used as shared memory between AIs
4. **Dispatcher (`GEMINI.md`)**: Gemini acts as orchestrator analyzing tasks and activating agents

### Workflow

Gemini analyzes `current-task.md`, the system activates corresponding agents in `.claude/agents/`, and Claude executes the task with optimized, specialized context.

## Repository Structure

```
ai-terminal-agent/
├── bin/                  # Executable scripts
│   ├── ai                # Main unified CLI entry point
│   ├── ai-workspace.sh   # Workspace management
│   ├── ai-context.sh     # Context management
│   ├── ai-config.sh      # Configuration
│   ├── ai-agents.sh      # Agent management
│   └── ...
├── lib/                  # Shared libraries
│   └── common.sh         # Common functions
├── agents-list/          # 47 agent definitions
├── config/               # Configuration templates
│   └── agent-profiles/   # Pre-defined profiles
├── templates/            # Context file templates
├── docs/                 # Detailed documentation
└── install.sh            # Installation script
```

## Layout

```
┌─────────────────────┬──────────────┐
│                     │   GEMINI     │
│                     │              │
│      CLAUDE         ├──────────────┤
│                     │   CODEX      │
│                     │              │
└─────────────────────┴──────────────┘
```

## Git Integration

AI Workspace files are **globally ignored** by default:
- `claude.md`, `gemini.md`, `agents.md`
- `.ai-config`, `.ai-workspace-active`
- `.ai-backups/`, `.ai-session-*.json`
- `.claude/`, `.ai-context/`

This uses `~/.gitignore_global` and **never modifies** your project's `.gitignore`.

## Multi-Machine Setup

### First Machine (Setup)

```bash
cd ~/workspace
git clone https://github.com/your-user/ai-terminal-agent.git
cd ai-terminal-agent
./install.sh
```

### Second Machine (Clone)

```bash
cd ~/workspace
git clone https://github.com/your-user/ai-terminal-agent.git
cd ai-terminal-agent
./install.sh
```

### Updates

```bash
ai config update    # Pull latest from git
```

## Troubleshooting

If you encounter issues:

1. Run `ai config doctor` to verify installation
2. Check [Troubleshooting Guide](docs/troubleshooting.md)
3. Ensure iTerm2 is installed
4. Verify AI CLIs are authenticated

Common issues:
- **"ai: command not found"** → Add `~/bin` to PATH or restart shell
- **"Git global ignore not working"** → Run `ai config git --setup`

## Documentation

- [Quick Reference](docs/quick-reference.md) - Cheatsheet
- [Installation Guide](docs/installation.md) - Detailed installation
- [Usage Guide](docs/usage.md) - How to use all commands
- [Agent Management](docs/agent-management.md) - Agent system details
- [Troubleshooting](docs/troubleshooting.md) - Common issues

## Version

Current version: **2.0.0**

See [CHANGELOG.md](CHANGELOG.md) for version history.

## License

MIT License - Use freely, modify as needed.

## Credits

Built with love for AI-assisted development.
